<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DGCCian PRIDE ü§ç</title>
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&family=Montserrat:wght@400;600;700&display=swap" rel="stylesheet">
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Font Awesome Icons -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <!-- Animate.css -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css">
    <!-- Custom CSS -->
    <style>
        :root {
            --primary: #64ffda;
            --primary-dark: #52d1b4;
            --dark-blue: #0a192f;
            --darker-blue: #020c1b;
            --light-blue: #112240;
            --lighter-blue: #233554;
            --text-light: #ccd6f6;
            --text-gray: #8892b0;
            --danger: #ff6b6b;
            --success: #6bff8f;
        }

        body {
            background: var(--dark-blue);
            color: var(--text-light);
            font-family: 'Poppins', sans-serif;
            overflow-x: hidden;
            line-height: 1.6;
            min-height: 100vh;
            position: relative;
        }
.toast-notification {
    position: fixed;
    bottom: 20px;
    right: 20px;
    background: var(--light-blue);
    color: var(--text-light);
    padding: 0.8rem 1.2rem;
    border-radius: 10px;
    display: flex;
    align-items: center;
    gap: 0.5rem;
    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
    z-index: 10000;
    max-width: 300px;
}
.toast-notification.success {
    background: var(--success);
    color: var(--dark-blue);
}
.toast-notification.error {
    background: var(--danger);
    color: white;
}
.toast-icon {
    font-size: 1.2rem;
}
.toast-message {
    flex: 1;
    font-size: 0.9rem;
}
.toast-close {
    cursor: pointer;
    font-size: 0.9rem;
}
.toast-notification.fade-out {
    animation: fadeOut 0.3s ease forwards;
}
@keyframes fadeOut {
    to {
        opacity: 0;
        transform: translateY(20px);
    }
}
        .container {
            padding: 0.1rem;
            max-width: 1400px;
        }

        .header {
            position: relative;
            padding: 1rem;
            background: linear-gradient(135deg, rgba(10, 25, 47, 0.9) 0%, rgba(2, 12, 27, 0.95) 100%);
            border-radius: 0 0 20px 20px;
            margin-bottom: 1rem;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            z-index: 10;
            backdrop-filter: blur(5px);
        }

        .clg-logo {
            width: 190px;
            height: 190px;
            border: 4px solid var(--primary);
            padding: 5px;
            border-radius: 15%;
            margin-bottom: 1rem;
            object-fit: cover;
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            box-shadow: 0 5px 15px rgba(100, 255, 218, 0.2);
        }

        .clg-logo:hover {
            transform: rotate(5deg) scale(1.1);
            box-shadow: 0 0 90px rgba(100, 255, 218, 0.5);
        }

        .display-4 {
            color: var(--primary);
            font-weight: 700;
            margin-bottom: 0.5rem;
            font-family: 'Montserrat', sans-serif;
            text-shadow: 0 2px 10px rgba(100, 255, 218, 0.3);
            letter-spacing: 1px;
        }

        .tagline {
            color: var(--text-gray);
            font-size: 1rem;
            margin-bottom: 1rem;
            position: relative;
            display: inline-block;
        }

        .tagline::after {
            content: '';
            position: absolute;
            bottom: -8px;
            left: 50%;
            transform: translateX(-50%);
            width: 50px;
            height: 3px;
            background: var(--primary);
            border-radius: 3px;
        }

        .search-filter-section {
            background: var(--light-blue);
            padding: 0.5rem;
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
            margin-bottom: 1rem;
            position: sticky;
            top: 10px;
            z-index: 5;
        }

        .search-box {
            position: relative;
            max-width: 600px;
            margin: 0 auto;
        }

        .search-box input {
            padding: 12px 50px 12px 20px;
            border-radius: 30px;
            background: var(--lighter-blue);
            border: 2px solid var(--lighter-blue);
            color: var(--text-light);
            font-size: 1rem;
            transition: all 0.3s ease;
        }

        .search-box input:focus {
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(100, 255, 218, 0.2);
        }

        .search-box i {
            position: absolute;
            right: 20px;
            top: 50%;
            transform: translateY(-50%);
            color: var(--primary);
            font-size: 1rem;
            pointer-events: none;
        }
        #bld {
            background: red;
            color: var(--primary);
            border: none;
            padding: 0.5rem;
            border-radius: 20px;
            cursor: pointer;
            transition: all 0.2s ease;
            font-size: 0.85rem;
            display: flex;
            align-items: center;
            gap: 0.3rem;
        }
        .quick-filter-buttons {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
            justify-content: center;
            margin-top: 0.5rem;
        }

        .quick-filter-btn {
            background: rgba(100, 255, 218, 0.1);
            color: var(--primary);
            border: none;
            padding: 0.5rem;
            border-radius: 20px;
            cursor: pointer;
            transition: all 0.2s ease;
            font-size: 0.85rem;
            display: flex;
            align-items: center;
            gap: 0.3rem;
        }

        .quick-filter-btn:hover {
            background: rgba(100, 255, 218, 0.3);
            transform: translateY(-2px);
        }

        .quick-filter-btn.active {
            background: var(--primary);
            color: var(--dark-blue);
            font-weight: 800;
        }

        .members-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 1.5rem;
            padding: 1rem 0;
        }

        .member-card {
            background: linear-gradient(135deg, var(--light-blue) 0%, var(--darker-blue) 100%);
            border: none;
            border-radius: 15px;
            transition: all 0.3s ease;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
            overflow: hidden;
            opacity: 0;
            transform: translateY(20px);
            animation: fadeInUp 0.5s ease forwards;
            position: relative;
        }

        @keyframes fadeInUp {
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .member-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(100, 255, 218, 0.3);
        }

        .member-card .card-body {
            padding: 1.5rem;
            display: flex;
            flex-direction: column;
            align-items: center;
            text-align: center;
        }

        .member-card img {
            width: 160px;
            height: 160px;
            object-fit: cover;
            border-radius: 30%;
            border: 3px solid var(--primary);
            margin-bottom: 1rem;
            transition: transform 0.3s ease;
        }

        .member-card:hover img {
            transform: scale(1.1);
        }

        .member-card .card-title {
            color: var(--primary);
            font-weight: 600;
            margin-bottom: 0.5rem;
            font-size: 1.3rem;
        }

        .member-card .card-text {
            color: var(--text-gray);
            font-size: 1rem;
            margin-bottom: 0.5rem;
        }

        .member-card .badge {
            margin: 0.2rem;
            font-weight: 700;
        }
#modalGenderBadge {
    display: none !important;
}
        .member-card .blood-group {
            position: absolute;
            top: 15px;
            right: 15px;
            background: brown;
            color: white;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 1rem;
        }

        .auth-btn {
            position: fixed;
            top: 20px;
            right: 20px;
            background: rgba(100, 255, 218, 0.1);
            color: var(--primary);
            border: none;
            padding: 0.7rem;
            border-radius: 30px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 0.85rem;
            z-index: 1000;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
            backdrop-filter: blur(5px);
        }

        .auth-btn:hover {
            background: rgba(100, 255, 218, 0.3);
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(100, 255, 218, 0.3);
        }

        .auth-btn i {
            font-size: 1.1rem;
        }
        .member-counter {
            position: fixed;
            top: 20px;
            left: 20px;
            background: rgba(100, 255, 218, 0.1);
            color: var(--primary);
            padding: 0.9rem;
            border-radius: 30px;
            font-size: 0.95rem;
            z-index: 1000;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
            backdrop-filter: blur(5px);
        }

        .member-counter i {
            font-size: 1.1rem;
        }

        /* Modals */
        .modal-content {
            background: var(--light-blue);
            border: none;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.4);
            font-size: 1.5rem;
        }

        .modal-header {
            border-bottom: 1px solid var(--lighter-blue);
            padding: 1rem;
        }

        .modal-title {
            color: var(--primary);
            font-weight: 600;
            font-size: 1.5rem;
        }

        .modal-body {
            padding: 1rem;
            color: var(--text-light);
        }

        .modal-footer {
            border-top: 1px solid var(--lighter-blue);
            padding: 0.5rem;
        }

        .btn-primary {
            background: var(--primary);
            color: var(--dark-blue);
            border: none;
            font-weight: 600;
            padding: 0.8rem 1rem;
            border-radius: 30px;
            transition: all 0.3s ease;
            letter-spacing: 0.5px;
        }

        .btn-primary:hover {
            background: var(--primary-dark);
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(100, 255, 218, 0.4);
        }

        .btn-outline-primary {
            border: 2px solid var(--primary);
            color: var(--primary);
            background: transparent;
            font-weight: 600;
            padding: 0.6rem 1rem;
            border-radius: 30px;
            transition: all 0.3s ease;
        }

        .btn-outline-primary:hover {
            background: var(--primary);
            color: var(--dark-blue);
            transform: translateY(-2px);
        }

        .form-control, .form-select {
            background: var(--lighter-blue);
            border: 2px solid var(--lighter-blue);
            color: var(--text-light);
            border-radius: 10px;
            padding: 0.8rem 1rem;
            transition: all 0.3s ease;
        }

        .form-control:focus, .form-select:focus {
            background: var(--lighter-blue);
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(100, 255, 218, 0.2);
            color: var(--text-light);
        }
        .form-check-label{
            font-size: 0.85rem;
        }
        .form-label {
            color: var(--primary);
            font-weight: 500;
            margin-bottom: 0.5rem;
            font-size: 0.95rem;
        }

        .profile-image-upload {
            position: relative;
            width: 200px;
            height: 200px;
            margin: 0 auto 0.5rem;
            cursor: pointer;
            border: 2px dashed var(--primary);
            display: flex;
            border-radius: 48%;
            align-items: center;
            justify-content: center;
            overflow: hidden;
            transition: all 0.3s ease;
        }

        .profile-image-upload:hover {
            border-color: var(--primary-dark);
            transform: translateY(-3px);
        }

        .profile-image-upload img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .profile-image-upload .upload-icon {
            position: absolute;
            bottom: 10px;
            right: 10px;
            background: var(--primary);
            color: var(--dark-blue);
            width: 35px;
            height: 35px;
            border-radius: 30%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1rem;
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.2);
        }

        #loadingOverlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(10, 25, 47, 0.9);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 9999;
            backdrop-filter: blur(5px);
        }

        .loader {
            border: 5px solid var(--lighter-blue);
            border-top: 5px solid var(--primary);
            border-radius: 50%;
            width: 60px;
            height: 60px;
            animation: spin 1s linear infinite;
            margin-bottom: 1.5rem;
        }

        .loading-text {
            color: var(--primary);
            font-size: 1.2rem;
            font-weight: 500;
            margin-top: 1rem;
            letter-spacing: 1px;
        }

        @media (max-width: 768px) {
            .members-grid {
                grid-template-columns: 1fr;
            }
            
            .header {
                padding: 1.5rem 0;
            }
            
            .clg-logo {
                width: 100px;
                height: 100px;
            }
            
            .display-4 {
                font-size: 2rem;
            }
            
            .search-filter-section {
                padding: 1rem;
            }
        }

        @keyframes float {
            0% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
            100% { transform: translateY(0px); }
        }

        .floating {
            animation: float 6s ease-in-out infinite;
        }

        ::-webkit-scrollbar {
            width: 8px;
        }

        ::-webkit-scrollbar-track {
            background: var(--light-blue);
        }

        ::-webkit-scrollbar-thumb {
            background: var(--primary);
            border-radius: 10px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: var(--primary-dark);
        }

        .particles {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            pointer-events: none;
        }

        .particle {
            position: absolute;
            background: rgba(100, 255, 218, 0.5);
            border-radius: 50%;
            pointer-events: none;
        }
    </style>
</head>

<body>
    <div id="loadingOverlay" class="animate__animated animate__fadeIn">
        <div class="loader"></div>
        <div class="loading-text">Loading DGCCian PRIDE...</div>
    </div>
    <div class="particles" id="particles"></div>
    <header class="header floating">
        <div class="container text-center">
            <!-- Member Counter -->
            <div class="member-counter" id="memberCounter">
                <i class="fas fa-users"></i> <span id="memberCount">0</span>
            </div>
            <button class="auth-btn" id="authButton">
                <i class="fas fa-sign-in-alt"></i> Sign In
            </button>
            <img alt="clg Logo" class="clg-logo animate__animated animate__bounceIn" src="https://i.postimg.cc/q7d8ybfT/FB-IMG-1742751213665.jpg">
            <h3 class="display-4 animate__animated animate__fadeInDown">DGCCian PRIDE <i class="fas fa-heart"></i></h3>
            <h5 class="animate__animated animate__fadeIn animate__delay-1s">HSC - 2024</h5>
            <p class="tagline animate__animated animate__fadeIn animate__delay-1s">üß™ You're a beta tester</p>
            <small class="animate__animated animate__fadeIn animate__delay-1s">
                <a href="https://www.instagram.com/mehedi_al_hasan_sawon_21?igsh=MXQ4cW1vYzE5aDgy" style="color: var(--text-light);">
                    <i class="fab fa-instagram"></i> mehedi_al_hasan_sawon_21
                </a>
            </small>
        </div>
    </header>
    <main class="container">
        <section class="search-filter-section animate__animated animate__fadeIn animate__delay-1s">
            <!-- Search Box -->
            <div class="search-box">
                <input class="form-control" id="searchInput" placeholder="Search by name, university, blood group..." type="text">
                <i class="fas fa-search"></i>
            </div>
            <div class="quick-filter-buttons mt-3">
                <button class="quick-filter-btn active" data-filter="All">
                    <i class="fas fa-users"></i> All <span id="allCount">(0)</span>
                </button>
                <button class="quick-filter-btn" data-filter="Engineering">
                    <i class="fas fa-cogs"></i> Engineering <span id="engineeringCount">(0)</span>
                </button>
                <button class="quick-filter-btn" data-filter="Medical">
                    <i class="fas fa-heartbeat"></i> Medical <span id="medicalCount">(0)</span>
                </button>
                <button class="quick-filter-btn" data-filter="University">
                    <i class="fas fa-university"></i> University <span id="universityCount">(0)</span>
                </button>
            </div>
            <div class="quick-filter-buttons mt-2" id="bld">
                <span class="text" style="color: white; font-weight: 600;font-size: 0.9rem; margin-right: 0.5rem;"><i class="fas fa-tint" style="color: white;"></i> Blood Group:</span>
                <button class="quick-filter-btn blood-filter" data-blood="A+">A+</button>
                <button class="quick-filter-btn blood-filter" data-blood="A-">A-</button>
                <button class="quick-filter-btn blood-filter" data-blood="B+">B+</button>
                <button class="quick-filter-btn blood-filter" data-blood="B-">B-</button>
                <button class="quick-filter-btn blood-filter" data-blood="AB+">AB+</button>
                <button class="quick-filter-btn blood-filter" data-blood="AB-">AB-</button>
                <button class="quick-filter-btn blood-filter" data-blood="O+">O+</button>
                <button class="quick-filter-btn blood-filter" data-blood="O-">O-</button>
            </div>
          <hr>  
        <div class="members-grid" id="membersGrid"></div>
        
        <!-- No Results Message -->
        <div class="text-center py-5" id="noResults" style="display: none;">
            <i class="fas fa-user-slash" style="font-size: 3rem; color: var(--text-gray); margin-bottom: 1rem;"></i>
            <h4 style="color: var(--text-gray);">No members found</h4>
            <p class="text-muted">Try adjusting your search or filters</p>
        </div>
    </main>
    <div class="modal fade" id="detailsModal" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Details: </h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body text-center">
                    <div class="profile-image-upload mb-4" style="width: 220px; height: 220px; margin: 0 auto;border-radius:10%; cursor: default;">
                        <img id="modalProfileImage" src="" alt="Profile" style="border: none;">
                    </div>
                    
                    <h3 id="modalName" style="color: var(--primary); margin-bottom: 0.5rem;"></h3>
                    <div class="d-flex justify-content-center gap-2 mb-3">
                        <span class="badge bg-primary" id="modalGenderBadge"></span>
                       <i class="fas fa-tint"></i> <span class="badge bg-danger" id="modalBloodBadge"></span>
                    </div>
                    
                    <div class="member-details">
                        <div class="detail-item">
                            <i class="fas fa-graduation-cap"></i>
                            <span id="modalUniversity"></span>
                        </div>
                        <div class="detail-item">
                            <i class="fas fa-book"></i>
                            <span id="modalSubject"></span>
                        </div>
                        <div class="detail-item">
                            <i class="fas fa-university"></i>
                           <span id="modalQualified"></span>
                        </div>
                    </div>
                    
                    <div class="categories mt-3" id="modalCategories"></div>
                    
                    <div class="social-links mt-4">
                        <a id="modalFacebook" href="#" target="_blank" class="btn btn-outline-primary btn-sm">
                            <i class="fab fa-facebook-f"></i> Facebook
                        </a>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-primary" data-bs-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>
    <div class="modal fade" id="profileModal" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">My Profile</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form id="profileForm">
                        <div class="text-center mb-4">
                            <div class="profile-image-upload" onclick="document.getElementById('profileImageInput').click()">
                                <img id="profileImagePreview" src="https://i.postimg.cc/sxQ8JrRs/avatar-profile-picture-icon-logo-design-vector-28836260.jpg" alt="Profile Preview">
                                <div class="upload-icon">
                                    <i class="fas fa-camera"></i>
                                </div>
                                <input type="file" id="profileImageInput" accept="image/*" style="display: none;">
                            </div>
                            <small class="text" style="color: var(--text-gray);">Click to upload profile picture</small>
                        </div>
                        
                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <label class="form-label" for="profileName"><i class="fas fa-user"></i> Full Name</label>
                                <input class="form-control" id="profileName" type="text" required>
                            </div>
                            
                            <div class="col-md-6 mb-3">
                                <label class="form-label" for="profileGender"><i class="fas fa-venus-mars"></i> Gender</label>
                                <select class="form-select" id="profileGender" required>
                                    <option value="Male">Male</option>
                                    <option value="Female">Female</option>
                                </select>
                            </div>
                        </div>
                        
                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <label class="form-label" for="profileBloodGroup"><i class="fas fa-tint"></i> Blood Group</label>
                                <select class="form-select" id="profileBloodGroup" required>
                                    <option value="A+">A+</option>
                                    <option value="A-">A-</option>
                                    <option value="B+">B+</option>
                                    <option value="B-">B-</option>
                                    <option value="AB+">AB+</option>
                                    <option value="AB-">AB-</option>
                                    <option value="O+">O+</option>
                                    <option value="O-">O-</option>
                                </select>
                            </div>
                            
                            <div class="col-md-6 mb-3">
                                <label class="form-label" for="profileCurrentUniversity"><i class="fas fa-graduation-cap"></i> Current University</label>
                                <input class="form-control" id="profileCurrentUniversity" type="text" required>
                            </div>
                        </div>
                        
                        <div class="mb-3">
                            <label class="form-label" for="profileSubject"><i class="fas fa-book"></i> Subject/Department</label>
                            <input class="form-control" id="profileSubject" type="text" required>
                        </div>
                        
                        <div class="mb-3">
                            <label class="form-label" for="profileQualifiedUniversities"><i class="fas fa-university"></i> Qualified Universities (comma separated)</label>
                            <input class="form-control" id="profileQualifiedUniversities" type="text" placeholder="BUET, DU, CUET" required>
                        </div>
                        
                        <div class="mb-3">
                            <label class="form-label" for="profileFacebook"><i class="fab fa-facebook"></i> Facebook Profile URL (optional)</label>
                            <input class="form-control" id="profileFacebook" type="url" placeholder="https://facebook.com/username">
                        </div>
                        
                        <div class="mb-4">
                            <label class="form-label"><i class="fas fa-tags"></i> Categories</label>
                            <div class="row">
                                <div class="col-md-4">
                                    <div class="form-check">
                                        <input class="form-check-input" type="checkbox" id="categoryEngineering" value="Engineering">
                                        <label class="form-check-label" for="categoryEngineering">Engineering</label>
                                    </div>
                                </div>
                                <div class="col-md-4">
                                    <div class="form-check">
                                        <input class="form-check-input" type="checkbox" id="categoryMedical" value="Medical">
                                        <label class="form-check-label" for="categoryMedical">Medical</label>
                                    </div>
                                </div>
                                <div class="col-md-4">
                                    <div class="form-check">
                                        <input class="form-check-input" type="checkbox" id="categoryUniversity" value="University">
                                        <label class="form-check-label" for="categoryUniversity">University</label>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <button class="btn btn-primary w-100 py-2" type="submit" id="profileSubmitBtn">
                            <i class="fas fa-save"></i> Save Profile
                        </button>
                    </form>
                </div>
            </div>
        </div>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/axios/1.4.0/axios.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/lodash@4.17.21/lodash.min.js"></script>
    <script type="module">
        const firebaseConfig = {
            apiKey: "AIzaSyA3eq7s6UvWPxlT05fXXesVpeSh1KnURyA",
            authDomain: "ssc22-4f7ae.firebaseapp.com",
            databaseURL: "https://ssc22-4f7ae-default-rtdb.firebaseio.com",
            projectId: "ssc22-4f7ae",
            storageBucket: "ssc22-4f7ae.firebasestorage.app",
            messagingSenderId: "355526890032",
            appId: "1:355526890032:web:6a19c027f419f54d75d3f5",
            measurementId: "G-GMHS7794LY"
        };
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
        import { getAuth, GoogleAuthProvider, signInWithPopup, signOut, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";
        import { getDatabase, ref, set, onValue, update } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-database.js";

        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);
        const database = getDatabase(app);
        const membersRef = ref(database, 'members');
        const cloudName = "dvhsit2uy";
        const uploadPreset = "Chating app";
        const watermarkPublicId = "Remove_background_project_3_brxjuo";
        let currentUser = null;
        let allMembers = {};
        let activeFilter = "All";
        let activeBloodFilter = null;
        let activeUniFilter = null;
        let searchQuery = "";
        let profileImageFile = null;
        const authButton = document.getElementById('authButton');
        const memberCounter = document.getElementById('memberCounter');
        const memberCount = document.getElementById('memberCount');
        const searchInput = document.getElementById('searchInput');
        const membersGrid = document.getElementById('membersGrid');
        const noResults = document.getElementById('noResults');
        const allCount = document.getElementById('allCount');
        const engineeringCount = document.getElementById('engineeringCount');
        const medicalCount = document.getElementById('medicalCount');
        const universityCount = document.getElementById('universityCount');
        const filterButtons = document.querySelectorAll('.quick-filter-btn[data-filter]');
        const bloodFilters = document.querySelectorAll('.blood-filter');
        const uniFilters = document.querySelectorAll('.uni-filter');
        const profileForm = document.getElementById('profileForm');
        const profileImageInput = document.getElementById('profileImageInput');
        const profileImagePreview = document.getElementById('profileImagePreview');
        const profileSubmitBtn = document.getElementById('profileSubmitBtn');
        const loadingOverlay = document.getElementById('loadingOverlay');
        const particlesContainer = document.getElementById('particles');
        function init() {
            createParticles();
            setupEventListeners();
            setupAuthStateListener();
            loadMembers();
        }
        function createParticles() {
            const particleCount = 30;
            for (let i = 0; i < particleCount; i++) {
                const particle = document.createElement('div');
                particle.classList.add('particle');
                const size = Math.random() * 2 + 1;
                particle.style.width = `${size}px`;
                particle.style.height = `${size}px`;
                particle.style.left = `${Math.random() * 100}%`;
                particle.style.top = `${Math.random() * 100}%`;
                const duration = Math.random() * 20 + 10;
                const delay = Math.random() * 5;
                particle.style.animation = `float ${duration}s ease-in-out ${delay}s infinite`;
                
                particlesContainer.appendChild(particle);
            }
        }
        function setupEventListeners() {
            // Auth button
            authButton.addEventListener('click', handleAuthClick);
            searchInput.addEventListener('input', _.debounce(() => {
                searchQuery = searchInput.value.toLowerCase();
                filterAndRenderMembers();
            }, 300));
            filterButtons.forEach(btn => {
                btn.addEventListener('click', () => {
                    activeFilter = btn.dataset.filter;
                    updateActiveFilters();
                    filterAndRenderMembers();
                });
            });
            bloodFilters.forEach(btn => {
                btn.addEventListener('click', () => {
                    if (activeBloodFilter === btn.dataset.blood) {
                        activeBloodFilter = null;
                    } else {
                        activeBloodFilter = btn.dataset.blood;
                    }
                    updateActiveFilters();
                    filterAndRenderMembers();
                });
            });
            uniFilters.forEach(btn => {
                btn.addEventListener('click', () => {
                    if (activeUniFilter === btn.dataset.uni) {
                        activeUniFilter = null;
                    } else {
                        activeUniFilter = btn.dataset.uni;
                    }
                    updateActiveFilters();
                    filterAndRenderMembers();
                });
            });
            profileImageInput.addEventListener('change', previewProfileImage);
            profileForm.addEventListener('submit', saveProfile);
        }
        function updateActiveFilters() {
            filterButtons.forEach(btn => {
                btn.classList.toggle('active', btn.dataset.filter === activeFilter);
            });
            bloodFilters.forEach(btn => {
                btn.classList.toggle('active', btn.dataset.blood === activeBloodFilter);
            });
            uniFilters.forEach(btn => {
                btn.classList.toggle('active', btn.dataset.uni === activeUniFilter);
            });
        }
        function handleAuthClick() {
            if (currentUser) {
                showProfileModal();
            } else {
                signInWithGoogle();
            }
        }
        async function signInWithGoogle() {
            const provider = new GoogleAuthProvider();
            try {
                await signInWithPopup(auth, provider);
            } catch (error) {
                console.error("Sign-in failed:", error);
                alert("Sign-in failed. Please try again.");
            }
        }
        function setupAuthStateListener() {
            onAuthStateChanged(auth, (user) => {
                currentUser = user;
                updateAuthButton();
                
                if (user) {
                    checkUserProfile();
                }
            });
        }
        function updateAuthButton() {
            if (currentUser) {
                authButton.innerHTML = '<i class="fas fa-user"></i> My Profile';
            } else {
                authButton.innerHTML = '<i class="fas fa-sign-in-alt"></i> Sign In';
            }
        }
        function checkUserProfile() {
            const userRef = ref(database, `members/${currentUser.uid}`);
            onValue(userRef, (snapshot) => {
                if (!snapshot.exists()) {
                    // New user, show profile creation modal
                    showProfileModal();
                }
            }, { onlyOnce: true });
        }
        function showProfileModal() {
            if (!currentUser) {
                alert("Please sign in to create or edit your profile.");
                return;
            }

            const profileModal = new bootstrap.Modal(document.getElementById('profileModal'));
            profileForm.reset();
            profileImagePreview.src = "https://i.postimg.cc/sxQ8JrRs/avatar-profile-picture-icon-logo-design-vector-28836260.jpg";
            profileImageFile = null;
            const userRef = ref(database, `members/${currentUser.uid}`);
            onValue(userRef, (snapshot) => {
                const data = snapshot.val();
                if (data) {
                    document.getElementById('profileName').value = data.username || '';
                    document.getElementById('profileGender').value = data.gender || 'Male';
                    document.getElementById('profileBloodGroup').value = data.bloodGroup || '';
                    document.getElementById('profileCurrentUniversity').value = data.currentUniversity || '';
                    document.getElementById('profileSubject').value = data.subject || '';
                    document.getElementById('profileFacebook').value = data.facebook || '';
                    document.getElementById('profileQualifiedUniversities').value = data.qualifiedUniversities?.join(', ') || '';
                    
                    if (data.categories) {
                        document.getElementById('categoryEngineering').checked = data.categories.includes('Engineering');
                        document.getElementById('categoryMedical').checked = data.categories.includes('Medical');
                        document.getElementById('categoryUniversity').checked = data.categories.includes('University');
                    }
                    
                    if (data.profilePicture) {
                        profileImagePreview.src = data.profilePicture;
                        if (data.gender === 'Female') {
                            profileImagePreview.classList.add('blur-image');
                        } else {
                            profileImagePreview.classList.remove('blur-image');
                        }
                    }
                } else {
                    document.getElementById('profileName').value = currentUser.displayName || '';
                }
            }, { onlyOnce: true });

            profileModal.show();
        }
        function previewProfileImage() {
            const file = profileImageInput.files[0];
            if (file) {
                profileImageFile = file;
                const reader = new FileReader();
                reader.onload = function(e) {
                    profileImagePreview.src = e.target.result;
                    const gender = document.getElementById('profileGender').value;
                    if (gender === 'Female') {
                        profileImagePreview.classList.add('blur-image');
                    } else {
                        profileImagePreview.classList.remove('blur-image');
                    }
                };
                reader.readAsDataURL(file);
            }
        }
        async function uploadProfileImage(file, gender) {
            const formData = new FormData();
            formData.append("file", file);
            formData.append("upload_preset", uploadPreset);

            try {
                const response = await axios.post(
                    `https://api.cloudinary.com/v1_1/${cloudName}/image/upload`,
                    formData,
                    {
                        headers: {
                            'Content-Type': 'multipart/form-data'
                        }
                    }
                );

                const publicId = response.data.public_id;
                let transformation = "";

                if (gender === "Female") {
                    transformation = `e_blur:1000/`;
                }

                transformation += `l_${watermarkPublicId},w_200,o_50,g_south,fl_relative/fl_layer_apply`;
                return `https://res.cloudinary.com/${cloudName}/image/upload/${transformation}/${publicId}.jpg`.replace(/\s+/g, '');
            } catch (err) {
                console.error("Image upload failed:", err);
                throw new Error("Failed to upload image. Please try again.");
            }
        }
        async function saveProfile(e) {
            e.preventDefault();
            
            if (!currentUser) {
                alert("Please sign in to save your profile.");
                return;
            }

            profileSubmitBtn.disabled = true;
            profileSubmitBtn.innerHTML = '<span class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></span> Saving...';

            try {
                const username = document.getElementById('profileName').value.trim();
                const gender = document.getElementById('profileGender').value;
                const bloodGroup = document.getElementById('profileBloodGroup').value;
                const currentUniversity = document.getElementById('profileCurrentUniversity').value.trim();
                const subject = document.getElementById('profileSubject').value.trim();
                const facebook = document.getElementById('profileFacebook').value.trim();
                const qualifiedUniversities = document.getElementById('profileQualifiedUniversities').value
                    .split(',')
                    .map(u => u.trim())
                    .filter(u => u.length > 0);
                
                const categories = [];
                if (document.getElementById('categoryEngineering').checked) categories.push('Engineering');
                if (document.getElementById('categoryMedical').checked) categories.push('Medical');
                if (document.getElementById('categoryUniversity').checked) categories.push('University');
                if (!username) throw new Error("Please enter your name");
                if (!gender) throw new Error("Please select your gender");
                if (!bloodGroup) throw new Error("Please select your blood group");
                if (!currentUniversity) throw new Error("Please enter your current university");
                if (!subject) throw new Error("Please enter your subject/department");
                if (qualifiedUniversities.length === 0) throw new Error("Please enter at least one qualified university");
                if (categories.length === 0) throw new Error("Please select at least one category");

                let profilePictureUrl = '';
                if (profileImageFile) {
                    profilePictureUrl = await uploadProfileImage(profileImageFile, gender);
                } else {
                    // Use existing image if available
                    const existingProfile = profileImagePreview.src;
                    if (existingProfile && !existingProfile.includes('.placeholder.com')) {
                        profilePictureUrl = existingProfile;
                    } else {
                        throw new Error("Please upload a profile picture");
                    }
                }
                const profileData = {
                    username,
                    gender,
                    bloodGroup,
                    currentUniversity,
                    subject,
                    qualifiedUniversities,
                    categories,
                    profilePicture: profilePictureUrl,
                    userId: currentUser.uid,
                    timestamp: Date.now(),
                    lastUpdated: Date.now()
                };
                if (facebook) {
                    if (!facebook.startsWith('https://www.facebook.com/') && 
                        !facebook.startsWith('https://facebook.com/')) {
                        throw new Error("Please enter a valid Facebook URL starting with https://facebook.com/");
                    }
                    profileData.facebook = facebook;
                }
                await set(ref(database, `members/${currentUser.uid}`), profileData);
                const profileModal = bootstrap.Modal.getInstance(document.getElementById('profileModal'));
                profileModal.hide();
                showToast('Profile saved successfully!', 'success');
            } catch (error) {
                console.error("Error saving profile:", error);
                showToast(error.message || "Failed to save profile. Please try again.", 'error');
            } finally {
                profileSubmitBtn.disabled = false;
                profileSubmitBtn.innerHTML = '<i class="fas fa-save"></i> Save Profile';
            }
        }
        function showToast(message, type = 'success') {
            const toast = document.createElement('div');
            toast.className = `toast-notification ${type}`;
            toast.innerHTML = `
                <div class="toast-icon">
                    ${type === 'success' ? '<i class="fas fa-check-circle"></i>' : '<i class="fas fa-exclamation-circle"></i>'}
                </div>
                <div class="toast-message">${message}</div>
                <div class="toast-close"><i class="fas fa-times"></i></div>
            `;
            document.body.appendChild(toast);
            setTimeout(() => {
                toast.classList.add('fade-out');
                setTimeout(() => toast.remove(), 300);
            }, 5000);
            toast.querySelector('.toast-close').addEventListener('click', () => {
                toast.classList.add('fade-out');
                setTimeout(() => toast.remove(), 300);
            });
        }
        function loadMembers() {
            onValue(membersRef, (snapshot) => {
                allMembers = snapshot.val() || {};
                updateMemberCounts();
                filterAndRenderMembers();
                setTimeout(() => {
                    loadingOverlay.classList.add('animate__fadeOut');
                    setTimeout(() => {
                        loadingOverlay.style.display = 'none';
                    }, 500);
                }, 500);
            }, (error) => {
                console.error("Error loading members:", error);
                loadingOverlay.classList.add('animate__fadeOut');
                setTimeout(() => {
                    loadingOverlay.style.display = 'none';
                }, 500);
            });
        }
        function updateMemberCounts() {
            const members = Object.values(allMembers);
            memberCount.textContent = members.length;
            
            const engineering = members.filter(m => m.categories?.includes('Engineering')).length;
            const medical = members.filter(m => m.categories?.includes('Medical')).length;
            const university = members.filter(m => m.categories?.includes('University')).length;
            
            allCount.textContent = `(${members.length})`;
            engineeringCount.textContent = `(${engineering})`;
            medicalCount.textContent = `(${medical})`;
            universityCount.textContent = `(${university})`;
        }
        function filterAndRenderMembers() {
            const filteredMembers = Object.entries(allMembers)
                .filter(([uid, member]) => {
                    const categoryMatch = activeFilter === "All" || 
                                         (member.categories && member.categories.includes(activeFilter));

                    const bloodMatch = !activeBloodFilter || 
                                      member.bloodGroup === activeBloodFilter;
                    
                    const uniMatch = !activeUniFilter || 
                                    (member.currentUniversity && member.currentUniversity.includes(activeUniFilter));
                    
                    const searchMatch = !searchQuery || 
                                      (member.username && member.username.toLowerCase().includes(searchQuery)) || 
                                      (member.currentUniversity && member.currentUniversity.toLowerCase().includes(searchQuery)) || 
                                      (member.bloodGroup && member.bloodGroup.toLowerCase().includes(searchQuery)) || 
                                      (member.qualifiedUniversities && member.qualifiedUniversities.some(u => u.toLowerCase().includes(searchQuery)));
                    
                    return categoryMatch && bloodMatch && uniMatch && searchMatch;
                })
                .sort((a, b) => b[1].timestamp - a[1].timestamp); // Sort by newest first

            renderMembers(filteredMembers);
        }
        function renderMembers(members) {
            if (members.length === 0) {
                membersGrid.style.display = 'none';
                noResults.style.display = 'block';
                return;
            }
            
            membersGrid.style.display = 'grid';
            noResults.style.display = 'none';
            membersGrid.innerHTML = '';
            members.forEach(([uid, member]) => {
                const memberCard = document.createElement('div');
                memberCard.className = 'member-card animate__animated animate__fadeIn';
                memberCard.style.animationDelay = `${Math.random() * 0.3}s`;
                const blurClass = member.gender === 'Female' ? 'blur-image' : '';
                
                memberCard.innerHTML = `
                    <div class="card-body">
                        ${member.bloodGroup ? `<div class="blood-group">${member.bloodGroup}</div>` : ''}
                        <img src="${member.profilePicture || 'https://i.postimg.cc/sxQ8JrRs/avatar-profile-picture-icon-logo-design-vector-28836260.jpg'}" 
                             alt="${member.username}'s profile" 
                             class="${blurClass}">
                        <h5 class="card-title">${member.username || 'Unknown'}</h5>
                        <p class="card-text"><i class="fas fa-graduation-cap"></i> ${member.currentUniversity || 'Not specified'}</p>
                        <p class="card-text"><i class="fas fa-book"></i> ${member.subject || 'Not specified'}</p>
                        <div class="mt-2">
                            ${member.categories?.map(cat => `<span class="badge bg-primary">${cat}</span>`).join(' ') || ''}
                        </div>
                    </div>
                `;
                
                memberCard.addEventListener('click', () => showMemberDetails(uid, member));
                membersGrid.appendChild(memberCard);
            });
        }
        function showMemberDetails(uid, member) {
            const modalProfileImage = document.getElementById('modalProfileImage');
            const modalName = document.getElementById('modalName');
            const modalGenderBadge = document.getElementById('modalGenderBadge');
            const modalBloodBadge = document.getElementById('modalBloodBadge');
            const modalUniversity = document.getElementById('modalUniversity');
            const modalSubject = document.getElementById('modalSubject');
            const modalQualified = document.getElementById('modalQualified');
            const modalCategories = document.getElementById('modalCategories');
            const modalFacebook = document.getElementById('modalFacebook');
            modalProfileImage.src = member.profilePicture || 'https://i.postimg.cc/sxQ8JrRs/avatar-profile-picture-icon-logo-design-vector-28836260.jpg';
            if (member.gender === 'Female') {
                modalProfileImage.classList.add('blur-image');
            } else {
                modalProfileImage.classList.remove('blur-image');
            }
            modalName.textContent = member.username || 'Unknown';
            modalGenderBadge.textContent = member.gender || 'N/A';
            modalBloodBadge.textContent = member.bloodGroup || 'N/A';
            modalUniversity.textContent = member.currentUniversity || 'Not specified';
            modalSubject.textContent = member.subject || 'Not specified';
            modalQualified.textContent = member.qualifiedUniversities?.join(', ') || 'Not specified';
            modalCategories.innerHTML = member.categories?.map(cat => 
                `<span class="badge bg-primary me-1">${cat}</span>`
            ).join('') || 'None';
            if (member.facebook) {
                modalFacebook.href = member.facebook;
                modalFacebook.style.display = 'inline-block';
            } else {
                modalFacebook.style.display = 'none';
            }
            const detailsModal = new bootstrap.Modal(document.getElementById('detailsModal'));
            detailsModal.show();
        }
        init();
    </script>
</body>

</html>
