<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Firebase Push Notification</title>
</head>
<body>
  <h1>Push Notification Test</h1>
  <button id="notifyBtn">Allow Notification</button>

  <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-messaging-compat.js"></script>

  <script>
    const firebaseConfig = {
      apiKey: "AIzaSyBC07Wifgkr4Cpu2Wj06OmfqYqxnDXWGD4",
      authDomain: "cricket-15dee.firebaseapp.com",
      databaseURL: "https://cricket-15dee-default-rtdb.firebaseio.com",
      projectId: "cricket-15dee",
      storageBucket: "cricket-15dee.firebasestorage.app",
      messagingSenderId: "739754695271",
      appId: "1:739754695271:web:9b08ccac464ea754a792c2",
      measurementId: "G-2G2113K5Q3"
    };

    firebase.initializeApp(firebaseConfig);
    const messaging = firebase.messaging();

    document.getElementById("notifyBtn").addEventListener("click", async () => {
      try {
        const permission = await Notification.requestPermission();
        if (permission === "granted") {
          const token = await messaging.getToken({
            vapidKey: "BAE2GcY_g7bLOw8hvdc2_iq8o63Ay0s6IM1nJyTfQaJMqwgFeRR3_t1uvs5r5vhbiRigUrsdr-50lyT7V8WYzxg"
          });
          alert("Token:\n" + token);
          console.log("Token:", token);
        } else {
          alert("Permission not granted");
        }
      } catch (err) {
        console.error("Error getting token", err);
      }
    });

    messaging.onMessage((payload) => {
      console.log("Message received. ", payload);
      new Notification(payload.notification.title, {
        body: payload.notification.body,
        icon: payload.notification.icon
      });
    });
  </script>
</body>
</html>